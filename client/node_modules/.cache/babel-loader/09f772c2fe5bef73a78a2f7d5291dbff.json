{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\menis\\\\Documents\\\\Programming\\\\Full-Stack\\\\React-and-Redux\\\\ms-forums\\\\client\\\\src\\\\components\\\\editUser.jsx\";\nimport Form from \"./common/form\";\nimport PageHeader from \"./common/pageHeader\";\nimport Joi from \"joi-browser\";\nimport userService from \"../services/userService\";\nimport { toast } from \"react-toastify\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass EditUser extends Form {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: {\n        email: \"\",\n        password: \"\",\n        name: \"\",\n        image: \"\"\n      },\n      errors: {}\n    };\n    this.schema = {\n      email: Joi.string().required().email().label(\"Email\"),\n      password: Joi.string().required().min(6).label(\"Password\"),\n      name: Joi.string().required().min(2).label(\"Name\"),\n      image: Joi.string().min(6).max(2048).required()\n    };\n\n    this.doSubmit = async () => {\n      const {\n        state: {\n          data\n        }\n      } = this;\n      await userService.updateUser(data);\n      toast(\"User details are updated\");\n      setTimeout(() => {\n        this.props.history.replace(\"/\");\n        window.location.reload();\n      }, 1500);\n    };\n\n    this.handleCancel = () => {\n      this.props.history.push(\"/\");\n    };\n  }\n\n  async componentDidMount() {\n    let {\n      data\n    } = await userService.getCurrentUserDetails();\n    this.setState({\n      data: this.mapToViewModel(data)\n    });\n  }\n\n  mapToViewModel(user) {\n    return {\n      email: user.email,\n      password: \"\",\n      name: user.name,\n      image: user.image\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(PageHeader, {\n        titleText: \"Edit Your Account\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-12\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Edit User Details\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-lg-6\",\n          children: /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: this.handleSubmit,\n            autoComplete: \"off\",\n            method: \"POST\",\n            encType: \"multipart/form-data\",\n            action: \"/upload\",\n            children: [this.renderInput(\"name\", \"Name\"), this.renderInput(\"email\", \"Email\"), this.renderInput(\"password\", \"Password\", \"password\"), this.renderInput(\"image\", \"Image URL\", \"img\"), this.renderButton(\"Update User\"), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-secondary ml-3\",\n              onClick: this.handleCancel,\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default EditUser;","map":{"version":3,"sources":["C:/Users/menis/Documents/Programming/Full-Stack/React-and-Redux/ms-forums/client/src/components/editUser.jsx"],"names":["Form","PageHeader","Joi","userService","toast","EditUser","state","data","email","password","name","image","errors","schema","string","required","label","min","max","doSubmit","updateUser","setTimeout","props","history","replace","window","location","reload","handleCancel","push","componentDidMount","getCurrentUserDetails","setState","mapToViewModel","user","render","handleSubmit","renderInput","renderButton"],"mappings":";AAAA,OAAOA,IAAP,MAAiB,eAAjB;AACA,OAAOC,UAAP,MAAuB,qBAAvB;AACA,OAAOC,GAAP,MAAgB,aAAhB;AACA,OAAOC,WAAP,MAAwB,yBAAxB;AACA,SAASC,KAAT,QAAsB,gBAAtB;;;AAEA,MAAMC,QAAN,SAAuBL,IAAvB,CAA4B;AAAA;AAAA;AAAA,SAC1BM,KAD0B,GAClB;AACNC,MAAAA,IAAI,EAAE;AAAEC,QAAAA,KAAK,EAAE,EAAT;AAAaC,QAAAA,QAAQ,EAAE,EAAvB;AAA2BC,QAAAA,IAAI,EAAE,EAAjC;AAAqCC,QAAAA,KAAK,EAAE;AAA5C,OADA;AAENC,MAAAA,MAAM,EAAE;AAFF,KADkB;AAAA,SAM1BC,MAN0B,GAMjB;AACPL,MAAAA,KAAK,EAAEN,GAAG,CAACY,MAAJ,GAAaC,QAAb,GAAwBP,KAAxB,GAAgCQ,KAAhC,CAAsC,OAAtC,CADA;AAEPP,MAAAA,QAAQ,EAAEP,GAAG,CAACY,MAAJ,GAAaC,QAAb,GAAwBE,GAAxB,CAA4B,CAA5B,EAA+BD,KAA/B,CAAqC,UAArC,CAFH;AAGPN,MAAAA,IAAI,EAAER,GAAG,CAACY,MAAJ,GAAaC,QAAb,GAAwBE,GAAxB,CAA4B,CAA5B,EAA+BD,KAA/B,CAAqC,MAArC,CAHC;AAIPL,MAAAA,KAAK,EAAET,GAAG,CAACY,MAAJ,GAAaG,GAAb,CAAiB,CAAjB,EAAoBC,GAApB,CAAwB,IAAxB,EAA8BH,QAA9B;AAJA,KANiB;;AAAA,SA2B1BI,QA3B0B,GA2Bf,YAAY;AACrB,YAAM;AACJb,QAAAA,KAAK,EAAE;AAAEC,UAAAA;AAAF;AADH,UAEF,IAFJ;AAIA,YAAMJ,WAAW,CAACiB,UAAZ,CAAuBb,IAAvB,CAAN;AACAH,MAAAA,KAAK,CAAC,0BAAD,CAAL;AACAiB,MAAAA,UAAU,CAAC,MAAM;AACf,aAAKC,KAAL,CAAWC,OAAX,CAAmBC,OAAnB,CAA2B,GAA3B;AACAC,QAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AACD,OAHS,EAGP,IAHO,CAAV;AAID,KAtCyB;;AAAA,SAwC1BC,YAxC0B,GAwCX,MAAM;AACnB,WAAKN,KAAL,CAAWC,OAAX,CAAmBM,IAAnB,CAAwB,GAAxB;AACD,KA1CyB;AAAA;;AAaH,QAAjBC,iBAAiB,GAAG;AACxB,QAAI;AAAEvB,MAAAA;AAAF,QAAW,MAAMJ,WAAW,CAAC4B,qBAAZ,EAArB;AACA,SAAKC,QAAL,CAAc;AAAEzB,MAAAA,IAAI,EAAE,KAAK0B,cAAL,CAAoB1B,IAApB;AAAR,KAAd;AACD;;AAED0B,EAAAA,cAAc,CAACC,IAAD,EAAO;AACnB,WAAO;AACL1B,MAAAA,KAAK,EAAE0B,IAAI,CAAC1B,KADP;AAELC,MAAAA,QAAQ,EAAE,EAFL;AAGLC,MAAAA,IAAI,EAAEwB,IAAI,CAACxB,IAHN;AAILC,MAAAA,KAAK,EAAEuB,IAAI,CAACvB;AAJP,KAAP;AAMD;;AAmBDwB,EAAAA,MAAM,GAAG;AACP,wBACE;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA,8BACE,QAAC,UAAD;AAAY,QAAA,SAAS,EAAC;AAAtB;AAAA;AAAA;AAAA;AAAA,cADF,eAEE;AAAK,QAAA,SAAS,EAAC,KAAf;AAAA,+BACE;AAAK,UAAA,SAAS,EAAC,QAAf;AAAA,iCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cAFF,eAOE;AAAK,QAAA,SAAS,EAAC,KAAf;AAAA,+BACE;AAAK,UAAA,SAAS,EAAC,UAAf;AAAA,iCACE;AACE,YAAA,QAAQ,EAAE,KAAKC,YADjB;AAEE,YAAA,YAAY,EAAC,KAFf;AAGE,YAAA,MAAM,EAAC,MAHT;AAIE,YAAA,OAAO,EAAC,qBAJV;AAKE,YAAA,MAAM,EAAC,SALT;AAAA,uBAOG,KAAKC,WAAL,CAAiB,MAAjB,EAAyB,MAAzB,CAPH,EAQG,KAAKA,WAAL,CAAiB,OAAjB,EAA0B,OAA1B,CARH,EASG,KAAKA,WAAL,CAAiB,UAAjB,EAA6B,UAA7B,EAAyC,UAAzC,CATH,EAUG,KAAKA,WAAL,CAAiB,OAAjB,EAA0B,WAA1B,EAAuC,KAAvC,CAVH,EAWG,KAAKC,YAAL,CAAkB,aAAlB,CAXH,eAYE;AACE,cAAA,SAAS,EAAC,wBADZ;AAEE,cAAA,OAAO,EAAE,KAAKV,YAFhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAZF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cAPF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AAiCD;;AA9EyB;;AAiF5B,eAAevB,QAAf","sourcesContent":["import Form from \"./common/form\";\r\nimport PageHeader from \"./common/pageHeader\";\r\nimport Joi from \"joi-browser\";\r\nimport userService from \"../services/userService\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nclass EditUser extends Form {\r\n  state = {\r\n    data: { email: \"\", password: \"\", name: \"\", image: \"\" },\r\n    errors: {},\r\n  };\r\n\r\n  schema = {\r\n    email: Joi.string().required().email().label(\"Email\"),\r\n    password: Joi.string().required().min(6).label(\"Password\"),\r\n    name: Joi.string().required().min(2).label(\"Name\"),\r\n    image: Joi.string().min(6).max(2048).required()\r\n  };\r\n\r\n  async componentDidMount() {\r\n    let { data } = await userService.getCurrentUserDetails();\r\n    this.setState({ data: this.mapToViewModel(data) });\r\n  }\r\n\r\n  mapToViewModel(user) {\r\n    return {\r\n      email: user.email,\r\n      password: \"\",\r\n      name: user.name,\r\n      image: user.image\r\n    };\r\n  }\r\n\r\n  doSubmit = async () => {\r\n    const {\r\n      state: { data },\r\n    } = this;\r\n\r\n    await userService.updateUser(data);\r\n    toast(\"User details are updated\");\r\n    setTimeout(() => {\r\n      this.props.history.replace(\"/\");\r\n      window.location.reload();\r\n    }, 1500);\r\n  };\r\n\r\n  handleCancel = () => {\r\n    this.props.history.push(\"/\");\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"container\">\r\n        <PageHeader titleText=\"Edit Your Account\"></PageHeader>\r\n        <div className=\"row\">\r\n          <div className=\"col-12\">\r\n            <p>Edit User Details</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"row\">\r\n          <div className=\"col-lg-6\">\r\n            <form\r\n              onSubmit={this.handleSubmit}\r\n              autoComplete=\"off\"\r\n              method=\"POST\"\r\n              encType=\"multipart/form-data\"\r\n              action=\"/upload\"\r\n            >\r\n              {this.renderInput(\"name\", \"Name\")}\r\n              {this.renderInput(\"email\", \"Email\")}\r\n              {this.renderInput(\"password\", \"Password\", \"password\")}\r\n              {this.renderInput(\"image\", \"Image URL\", \"img\")}\r\n              {this.renderButton(\"Update User\")}\r\n              <button\r\n                className=\"btn btn-secondary ml-3\"\r\n                onClick={this.handleCancel}\r\n              >\r\n                Cancel\r\n              </button>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default EditUser;\r\n"]},"metadata":{},"sourceType":"module"}