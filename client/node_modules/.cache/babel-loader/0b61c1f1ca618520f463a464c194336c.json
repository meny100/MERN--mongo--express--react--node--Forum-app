{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\menis\\\\Documents\\\\Programming\\\\Full-Stack\\\\React-and-Redux\\\\ms-forums\\\\client\\\\src\\\\components\\\\comments.jsx\";\nimport Joi from \"joi-browser\";\nimport React from \"react/cjs/react.production.min\";\nimport postService from \"../services/postService\";\nimport Form from \"./common/form\";\nimport Post from \"./post\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Comments extends Form {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: {\n        comment: \"\"\n      },\n      post: {},\n      comments: [],\n      errors: {}\n    };\n    this.schema = {\n      comment: Joi.string().required().min(2)\n    };\n\n    this.doSubmit = async () => {\n      const {\n        state: {\n          data: {\n            comment\n          }\n        }\n      } = this;\n      let postId = this.props.match.params.id;\n      await postService.publishComment({\n        comment,\n        postId\n      });\n      window.location.reload();\n    };\n  }\n\n  async componentDidMount() {\n    var _data$comments;\n\n    let postId = this.props.match.params.id;\n    window.scrollTo(0, 0);\n    let {\n      data\n    } = await postService.getPost(postId);\n    let comments = data === null || data === void 0 ? void 0 : (_data$comments = data.comments) === null || _data$comments === void 0 ? void 0 : _data$comments.reverse();\n    this.setState({\n      post: data,\n      comments\n    });\n  }\n\n  render() {\n    const {\n      state: {\n        post\n      }\n    } = this;\n    const {\n      state: {\n        comments\n      }\n    } = this;\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-danger mt-2\",\n          onClick: () => this.props.history.goBack(),\n          children: \"X\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: /*#__PURE__*/_jsxDEV(Post, {\n            post: post\n          }, post === null || post === void 0 ? void 0 : post._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-10\",\n            children: /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: this.handleSubmit,\n              autoComplete: \"off\",\n              method: \"POST\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"d-inline col-9\",\n                  children: this.renderInput(\"comment\", \"\", \"text\")\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 67,\n                  columnNumber: 18\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"d-inline col-3 mt-4\",\n                  children: this.renderButton(\"+Add Comment\")\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 70,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 66,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 61,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"my-3\",\n          children: \"Comments\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row mt-4\",\n          children: !!(comments === null || comments === void 0 ? void 0 : comments.length) && comments.map((comment, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-10 mt-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"b\", {\n              style: {\n                fontSize: \"0.7em\",\n                opacity: \"0.4\"\n              },\n              children: [comment === null || comment === void 0 ? void 0 : comment.publisher, \" - \", comment === null || comment === void 0 ? void 0 : comment.time]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: comment === null || comment === void 0 ? void 0 : comment.content\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              role: \"separator\",\n              className: \"dropdown-divider\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 19\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Comments;","map":{"version":3,"sources":["C:/Users/menis/Documents/Programming/Full-Stack/React-and-Redux/ms-forums/client/src/components/comments.jsx"],"names":["Joi","React","postService","Form","Post","Comments","state","data","comment","post","comments","errors","schema","string","required","min","doSubmit","postId","props","match","params","id","publishComment","window","location","reload","componentDidMount","scrollTo","getPost","reverse","setState","render","history","goBack","_id","handleSubmit","renderInput","renderButton","length","map","index","fontSize","opacity","publisher","time","content"],"mappings":"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","sourcesContent":["import Joi from \"joi-browser\";\r\nimport React from \"react/cjs/react.production.min\";\r\nimport postService from \"../services/postService\";\r\nimport Form from \"./common/form\";\r\nimport Post from \"./post\";\r\n\r\nclass Comments extends Form {\r\n  state = {\r\n    data: {\r\n      comment: \"\",\r\n    },\r\n    post: {},\r\n    comments: [],\r\n    errors: {},\r\n  };\r\n\r\n  async componentDidMount() {\r\n    let postId = this.props.match.params.id;\r\n    window.scrollTo(0, 0);\r\n    let { data } = await postService.getPost(postId);\r\n    let comments = data?.comments?.reverse();\r\n    this.setState({ post: data, comments });\r\n  }\r\n\r\n  schema = {\r\n    comment: Joi.string().required().min(2),\r\n  };\r\n\r\n  doSubmit = async () => {\r\n    const {\r\n      state: {\r\n        data: { comment },\r\n      },\r\n    } = this;\r\n    let postId = this.props.match.params.id;\r\n    await postService.publishComment({ comment, postId });\r\n    window.location.reload();\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      state: { post },\r\n    } = this;\r\n    const {\r\n      state: { comments },\r\n    } = this;\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"container\">\r\n          <button\r\n            className=\"btn btn-danger mt-2\"\r\n            onClick={() => this.props.history.goBack()}\r\n          >\r\n            X\r\n          </button>\r\n          <div className=\"row\">\r\n            <Post key={post?._id} post={post} />\r\n          </div>\r\n          <div className=\"row\">\r\n            <div className=\"col-10\">\r\n              <form\r\n                onSubmit={this.handleSubmit}\r\n                autoComplete=\"off\"\r\n                method=\"POST\"\r\n              >\r\n                <div className=\"row\">\r\n                 <div className=\"d-inline col-9\">\r\n                {this.renderInput(\"comment\", \"\", \"text\")}\r\n                  </div>\r\n                <div className=\"d-inline col-3 mt-4\">\r\n                  {this.renderButton(\"+Add Comment\")}\r\n                </div>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n          <h4 className=\"my-3\">Comments</h4>\r\n          <div className=\"row mt-4\">\r\n            {!!comments?.length &&\r\n              comments.map((comment, index) => (\r\n                <div className=\"col-10 mt-1\" key={index}>\r\n                  <b style={{ fontSize: \"0.7em\", opacity: \"0.4\" }}>\r\n                    {comment?.publisher} - {comment?.time}\r\n                  </b>\r\n                  <p>{comment?.content}</p>\r\n                  <p role=\"separator\" className=\"dropdown-divider\"></p>\r\n                </div>\r\n              ))}\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Comments;\r\n"]},"metadata":{},"sourceType":"module"}